{
    "/cache": {
        "expected": {},
        "/locations": {
            "expected": [],
            "<addNewLocation>": {
                "level": 50,
                "action": "addNewLocation",
                "method": "push",
                "uniqs": [
                    "."
                ],
                "value": "{location}",
                "args": {
                    "location": "#String"
                }
            }
        },
        "/rooms": {
            "expected": [],
            "<add>": {
                "action": "addNewRoom",
                "title": "Добавлена новая комната $name",
                "shortTitle": "Создание комнаты",
                "method": "push",
                "level": 4,
                "value": {
                    "name": "{name}",
                    "w": "{@setNewWid()}",
                    "locations": [],
                    "iterations": 0,
                    "members": [
                        {
                            "login": "{*login}",
                            "name": "{*fio}",
                            "status": "owner"
                        }
                    ]
                },
                "args": {
                    "name": "#String"
                }
            },
            "<rem>": {
                "action": "removeRoom",
                "method": "remove",
                "shortTitle": "Удаление комнаты",
                "level": 50,
                "args": {
                    "roomw": "#Number"
                },
                "value": [
                    "w",
                    "===",
                    "{roomw}"
                ]
            },
            "/[w === {roomw}]": {
                "args": {
                    "roomw": "#Number"
                },
                "<side>": {
                    "side": {
                        "/finisher": {
                            "method": "set",
                            "value": null
                        },
                        "/retired": {
                            "method": "set",
                            "value": null
                        }
                    },
                    "/roles": {
                        "action": "resetResults",
                        "method": "set",
                        "value": null
                    }
                },
                "<startGame>": {
                    "args": {
                        "location": "#String",
                        "spiesCount": "#Number"
                    },
                    "side": {
                        "/iterations": {
                            "method": "formula",
                            "value": "X + 1"
                        },
                        "/finisher": {
                            "method": "set",
                            "value": null
                        },
                        "/locations": {
                            "method": "push",
                            "value": "{location}",
                            "expected": []
                        },
                        "/spiesCount": {
                            "method": "set",
                            "value": "{spiesCount}"
                        }
                    },
                    "/roles": {
                        "action": "startGame",
                        "method": "set",
                        "value": "{roles}",
                        "args": {
                            "roles": "#Dict"
                        }
                    }
                },
                "/finisher": {
                    "action": "finishGame",
                    "method": "set",
                    "value": {
                        "login": "{*login}",
                        "name": "{*fio}"
                    }
                },
                "<membership>": {
                    "access": [
                        "members",
                        [
                            "login",
                            "===&",
                            "{*login}",
                            "status",
                            "===",
                            "owner"
                        ]
                    ],
                    "<access>": {
                        "access": [
                            "members",
                            [
                                "login",
                                "===&",
                                "{login}",
                                "status",
                                "!==",
                                "owner"
                            ]
                        ],
                        "/members/[login === {login}]": {
                            "/status": {
                                "<up>": {
                                    "action": "riseUpToAdmin",
                                    "method": "set",
                                    "value": "admin"
                                },
                                "<down>": {
                                    "action": "riseDownToUser",
                                    "method": "set",
                                    "value": "member"
                                }
                            }
                        }
                    }
                },
                "<start game>": {
                    "access": [
                        "members",
                        [
                            "login",
                            "===&",
                            "{*login}",
                            "status",
                            "in",
                            [
                                "owner",
                                "admin"
                            ]
                        ]
                    ],
                    "/retired": {
                        "expected": [],
                        "<excludeMember>": {
                            "action": "excludeMember",
                            "method": "push",
                            "value": "{login}",
                            "uniqs": [
                                "."
                            ],
                            "args": {
                                "login": "#String"
                            }
                        }
                    },
                    "/members": {
                        "/[login === {login}]": {
                            "args": {
                                "login": "#String"
                            },
                            "/status": {
                                "action": "acceptMemberToRoom",
                                "method": "set",
                                "value": "member"
                            },
                            "/isInactive": {
                                "<ban>": {
                                    "action": "banCurrentRoomMember",
                                    "method": "set",
                                    "value": true
                                },
                                "<unban>": {
                                    "action": "unbanCurrentRoomMember",
                                    "method": "set",
                                    "value": false
                                }
                            }
                        }
                    },
                    "/locations": {
                        "expected": [],
                        "args": {
                            "value": "#String"
                        },
                        "<add>": {
                            "action": "strikeLocation",
                            "method": "push",
                            "uniqs": [
                                "."
                            ]
                        },
                        "<rem>": {
                            "action": "unstrikeLocation",
                            "method": "remove_each",
                            "value": [
                                ".",
                                "===",
                                "{value}"
                            ]
                        }
                    }
                },
                "/members": {
                    "<requestAddToRoom>": {
                        "action": "requestAddToRoom",
                        "method": "push",
                        "uniqs": [
                            "login"
                        ],
                        "args": {
                            "login": "#String",
                            "fio": "#String"
                        },
                        "value": {
                            "w": "{@setNewWid()}",
                            "login": "{*login}",
                            "name": "{*fio}",
                            "status": "requester"
                        }
                    }
                }
            }
        }
    }
}